// nextflow.config

// 基础配置
workDir = "${params.outdir}/work"

// 参数默认值
params {
    // 输入参数
    manifest = null
    reference_fasta = null
    annotation_gtf = null
    ref_db = null
    
    // 输出目录
    outdir = "${launchDir}/results"
    qc_dir = "${params.outdir}/results/qc"
    
    // 分析参数
    tpm_cutoff = 0.1
    min_orf_length = 7
}

// 进程默认配置
process {
    // 全局默认设置
    cpus = 1
    memory = '2 GB'
    time = '1 h'
    errorStrategy = 'terminate'
    maxRetries = 0
    maxErrors = 5
    
    // 特定进程资源配置
    withName: 'FLAIR_PIP' {
        cpus = 40
        memory = '100 GB'
        time = '480 h'
        errorStrategy = 'terminate'
        maxRetries = 0
    }
    
    withName: 'MODIFICATION_DETECTION' {
        cpus = 10
        memory = '100 GB'
        time = '480 h'
        errorStrategy = 'terminate'
        maxRetries = 0
    }
    
    withName: 'GENERATE_REFERENCE' {
        cpus = 40
        memory = '100 GB'
        time = '480 h'
        errorStrategy = 'terminate'
        maxRetries = 0
    }
    
    withName: 'REMOVE_HOMO' {
        cpus = 10
        memory = '100 GB'
        time = '480 h'
        errorStrategy = 'terminate'
        maxRetries = 0
    }
    
    // 轻量级进程
    withName: 'READS_CHOP|SEQKIT_LENGTH|GET_FILE_SIZE' {
        cpus = 2
        memory = '40 GB'
        time = '20 h'
        errorStrategy = 'terminate'
        maxRetries = 0
    }
    
    // SUPPA2资源配置
    withName: 'SUPPA2_ANALYSIS' {
        cpus = 10
        memory = '100 GB'
        time = '480 h'
        errorStrategy = 'terminate'
        maxRetries = 0
    }
}

